# CodeClarity Deployment

<br>

<div align="center">
    <img src="https://user-images.githubusercontent.com/124595411/235138790-d86cc2b8-e3ef-43eb-846c-38055748c9db.svg" width="400px" />
</div>

<br>

## Overview

This repository contains all the configuration files to deploy on CodeClarity.

## License

This project is licensed under the AGPL-3.0-or-later license. See [LICENSE](./LICENSE) for details.

## Requirements

- curl
- openssl
- make
- [docker](https://docs.docker.com/engine/install/)
- [docker compose](https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-compose-on-ubuntu-20-04)

## Setup Instructions

### 1. Clone this repository

```bash
git clone git@github.com:CodeClarityCE/deployment.git
cd deployment
```

### 2. Create JWT Tokens

```bash
# openssl needs to be installed
make setup-jwt
```

### 3. Restore database

```bash
# curl and docker compose need to be installed
make up
make download-dumps
make knowledge-setup
make restore-database
make down && make up
```

### 4. Update DB (Optional)

Please apply for an NVD API key [here](https://nvd.nist.gov/developers/request-an-api-key), and fill it in `.env.codeclarity`.

Run the command to update the knowledge DB:

```bash
make knowledge-update
```

## Start using the platform

You can visit [https://localhost:443](https://localhost:443) to start using the platform. You might need to accept the self-signed certificate generated by Caddy.

If you imported the dump we provide, you can connect using the following credentials:

- login: `john.doe@codeclarity.io`
- password: `ThisIs4Str0ngP4ssW0rd?`

Now, follow [this guide](https://www.codeclarity.io/docs/createanalysis) to create your first analysis!

## Contributing

If you'd like to contribute code or documentation, please see [CONTRIBUTING.md](./CONTRIBUTING.md) for guidelines on how to do so.

## Reporting Issues

Please report any issues with the setup process or other problems encountered while using this repository by opening a new issue in this project's GitHub page.
